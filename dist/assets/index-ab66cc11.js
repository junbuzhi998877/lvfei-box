import{r as m,c as $e,L as K,u as ee,e as De,f as Te,h as J,R as ye,H as Ae}from"./react-18239860.js";import{F as re,M as W,B as I,A as Oe,C as ue,S as Ne,a as Re,T as se,b as te,c as Ee,d as Y,e as le,f as be,U as Be,g as oe,E as ze,D as Pe,h as qe,i as fe,j as Ue,k as Ce,l as Le,m as Ge,n as r,o as pe,p as me,R as A,Q as je,q as Ie,r as Se,I as ge,P as _e,s as Me,t as Qe,u as We,v as He,L as X}from"./antd-92981061.js";(function(){const s=document.createElement("link").relList;if(s&&s.supports&&s.supports("modulepreload"))return;for(const c of document.querySelectorAll('link[rel="modulepreload"]'))n(c);new MutationObserver(c=>{for(const a of c)if(a.type==="childList")for(const f of a.addedNodes)f.tagName==="LINK"&&f.rel==="modulepreload"&&n(f)}).observe(document,{childList:!0,subtree:!0});function h(c){const a={};return c.integrity&&(a.integrity=c.integrity),c.referrerPolicy&&(a.referrerPolicy=c.referrerPolicy),c.crossOrigin==="use-credentials"?a.credentials="include":c.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function n(c){if(c.ep)return;c.ep=!0;const a=h(c);fetch(c.href,a)}})();var ke={exports:{}},ae={};/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ve=m,Je=Symbol.for("react.element"),Xe=Symbol.for("react.fragment"),Ke=Object.prototype.hasOwnProperty,Ye=Ve.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,Ze={key:!0,ref:!0,__self:!0,__source:!0};function Fe(g,s,h){var n,c={},a=null,f=null;h!==void 0&&(a=""+h),s.key!==void 0&&(a=""+s.key),s.ref!==void 0&&(f=s.ref);for(n in s)Ke.call(s,n)&&!Ze.hasOwnProperty(n)&&(c[n]=s[n]);if(g&&g.defaultProps)for(n in s=g.defaultProps,s)c[n]===void 0&&(c[n]=s[n]);return{$$typeof:Je,type:g,key:a,ref:f,props:c,_owner:Ye.current}}ae.Fragment=Xe;ae.jsx=Fe;ae.jsxs=Fe;ke.exports=ae;var e=ke.exports,xe={},ve=$e;xe.createRoot=ve.createRoot,xe.hydrateRoot=ve.hydrateRoot;const es=()=>{const g=[{key:"pdf",title:"PDF格式转换",icon:"PDF",iconClass:"pdf",description:"轻松转换PDF至Word、Excel、PPT等格式，或将其他格式转为PDF。",path:"/pdf"},{key:"image",title:"图片压缩工具",icon:"IMG",iconClass:"image",description:"高质量图片压缩，减小文件体积但保持视觉效果。批量处理更高效。",path:"/image"},{key:"qrcode",title:"二维码生成",icon:"QR",iconClass:"qrcode",description:"快速生成自定义二维码，支持多种格式和样式。",path:"/qrcode"}];return e.jsxs("div",{className:"home-container",children:[e.jsxs("section",{className:"hero-section",children:[e.jsx("h1",{children:"多功能工具箱"}),e.jsx("p",{className:"subtitle",children:"简单高效的桌面实用工具集"})]}),e.jsx("section",{className:"tools-section",children:e.jsx("div",{className:"tools-grid",children:g.map(s=>e.jsxs("div",{className:"tool-card",children:[e.jsx("div",{className:`tool-icon ${s.iconClass}`,children:s.icon}),e.jsx("h2",{className:"tool-title",children:s.title}),e.jsx("p",{className:"tool-description",children:s.description}),e.jsx(K,{to:s.path,className:"primary-button",children:"开始使用"})]},s.key))})}),e.jsxs("section",{className:"features-section",children:[e.jsx("h2",{children:"为什么选择我们的工具箱？"}),e.jsxs("div",{className:"features-grid",children:[e.jsxs("div",{className:"feature-item",children:[e.jsx("h3",{children:"🚀 高效处理"}),e.jsx("p",{children:"所有工具均采用优化算法，确保快速处理文件"})]}),e.jsxs("div",{className:"feature-item",children:[e.jsx("h3",{children:"🔒 本地运行"}),e.jsx("p",{children:"所有处理在本地完成，保护您的数据安全"})]}),e.jsxs("div",{className:"feature-item",children:[e.jsx("h3",{children:"🔄 批量处理"}),e.jsx("p",{children:"支持多文件批量操作，提高工作效率"})]})]})]})]})},{Title:ss,Text:ts}=se,{Option:ce}=Ne,rs=({visible:g,onClose:s,onConvert:h,pdfPreview:n,pdfFileName:c,isConverting:a,isInvoice:f})=>{const[N]=re.useForm(),R=()=>{N.validateFields().then(O=>{h({conformance:O.conformance,preserveSignatures:O.preserveSignatures,isInvoice:f})})};return e.jsxs(W,{title:null,open:g,onCancel:s,width:800,className:"preview-modal",footer:[e.jsx(I,{onClick:s,className:"cancel-button",disabled:a,children:"取消"},"back"),e.jsx(I,{type:"primary",onClick:R,loading:a,className:"convert-button",children:"开始转换"},"submit")],maskClosable:!a,closable:!a,children:[e.jsx("div",{className:"preview-header",children:e.jsx(ss,{level:4,children:"PDF转OFD设置"})}),f&&e.jsx(Oe,{message:"检测到发票文档",description:"系统检测到该PDF可能是发票文档，将使用针对发票优化的转换流程。",type:"info",icon:e.jsx(ue,{}),className:"invoice-alert"}),e.jsxs("div",{className:"preview-content",children:[e.jsx("div",{className:"file-info",children:e.jsx(ts,{strong:!0,className:"file-name",children:c})}),n&&e.jsx("div",{className:"pdf-preview",children:e.jsx("iframe",{src:n,title:"PDF Preview",className:"preview-frame"})}),e.jsxs(re,{form:N,layout:"vertical",className:"conversion-form",initialValues:{conformance:"standard",preserveSignatures:!1},children:[e.jsx(re.Item,{label:"一致性级别",name:"conformance",className:"form-item",children:e.jsxs(Ne,{children:[e.jsx(ce,{value:"basic",children:"基础级"}),e.jsx(ce,{value:"standard",children:"标准级"}),e.jsx(ce,{value:"enhanced",children:"增强级"})]})}),e.jsx(re.Item,{name:"preserveSignatures",valuePropName:"checked",className:"form-item",children:e.jsx(Re,{children:"保留数字签名"})})]})]})]})};const{Title:ne,Text:de,Paragraph:ys}=se,{Dragger:ns}=fe,is=()=>{var B,U;const g=ee(),[s,h]=m.useState("docx"),[n,c]=m.useState([]),[a,f]=m.useState(!1),[N,R]=m.useState(null),[O,P]=m.useState(!1),[u,$]=m.useState({pdfFile:null,outputDir:""}),[w,k]=m.useState(0),[C,G]=m.useState("pdfToOther"),[o,v]=m.useState(!1),x=[{key:"docx",title:"Word",description:".pdf → .docx",icon:e.jsx(Ue,{style:{fontSize:28,color:"#ffffff"}}),color:"#fa3c52"},{key:"xlsx",title:"Excel",description:".pdf → .xlsx",icon:e.jsx(Ce,{style:{fontSize:28,color:"#ffffff"}}),color:"#107c41"},{key:"pptx",title:"PowerPoint",description:".pdf → .pptx",icon:e.jsx(Le,{style:{fontSize:28,color:"#ffffff"}}),color:"#d04423"},{key:"jpg",title:"图片",description:".pdf → .jpg/.png",icon:e.jsx(Ge,{style:{fontSize:28,color:"#ffffff"}}),color:"#38b6ff"},{key:"ofd",title:"OFD",description:".pdf → .ofd",icon:e.jsx(le,{style:{fontSize:28,color:"#ffffff"}}),color:"#6a0dad"}],y=async t=>{if(console.log("处理文件上传:",t.name),!t.name.toLowerCase().endsWith(".pdf"))return r.error("请上传PDF格式的文件"),!1;if(t.size>20*1024*1024)return r.error("文件大小不能超过20MB"),!1;try{const p=await E(t),S={uid:t.name+Date.now(),name:t.name,status:"pending",progress:0,originalSize:t.size,preview:p};if(window.electronAPI){const T=await window.electronAPI.uploadImage({dataUrl:p,fileName:t.name});if(T.success){const H={...S,path:T.filePath};if(c(_=>[..._,H]),r.success(`${t.name} 上传成功`),s==="ofd")try{v(!0),await i(H)}finally{v(!1)}}else throw new Error(T.error||"上传失败")}else throw new Error("系统功能不可用")}catch(p){r.error(`上传失败: ${p.message}`)}return!1},i=async t=>{if(!(!window.electronAPI||!window.electronAPI.detectInvoice||!t.path))try{const p=await window.electronAPI.detectInvoice({pdfPath:t.path});p.success&&p.isInvoice&&(r.info("检测到上传文件可能是发票，将使用专用处理流程"),$(S=>({...S,isInvoice:!0})))}catch(p){console.error("发票检测失败:",p)}},D=async()=>{if(n.length===0){r.warning("请先添加PDF文件");return}f(!0);try{if(!window.electronAPI)throw new Error("系统功能不可用");const t=await window.electronAPI.selectSavePath({defaultName:"选择保存目录"});if(!t.success||!t.filePath){f(!1);return}const p=t.filePath;if(s==="ofd"){P(!0),$({pdfFile:n[0],outputDir:p,isInvoice:u.isInvoice}),f(!1);return}for(const S of n)if(S.status!=="success")try{c(M=>M.map(L=>L.uid===S.uid?{...L,status:"processing",progress:10}:L));const T=S.name.replace(".pdf",""),H=`${p}/${T}.${s}`,_=await window.electronAPI.convertPDF({inputPath:S.path,outputPath:H,type:s,options:{quality:100,dpi:300,preserveFormatting:!0}});if(c(M=>M.map(L=>L.uid===S.uid?{...L,status:_.success?"success":"error",progress:_.success?100:0,error:_.error,outputPath:_.success?H:void 0}:L)),_.success)r.success(`${S.name} 转换成功`);else throw new Error(_.error||"转换失败")}catch(T){console.error(`处理文件 ${S.name} 时出错:`,T),r.error(`${S.name} 处理失败: ${T.message}`)}r.success("批量转换完成！")}catch(t){console.error("批量处理错误:",t),r.error(`批量处理失败: ${t.message}`)}finally{f(!1)}},Q=t=>{t>=0&&t<=2&&k(t)},q=()=>{w<2&&k(w+1)},E=t=>new Promise((p,S)=>{const T=new FileReader;T.onload=()=>p(T.result),T.onerror=()=>S(new Error("文件读取失败")),T.readAsDataURL(t)}),z=t=>{if(!t)return"未知";const p=["B","KB","MB","GB"];let S=0,T=t;for(;T>=1024&&S<p.length-1;)T/=1024,S++;return`${T.toFixed(2)} ${p[S]}`},l=async t=>{if(!u.pdfFile||!u.outputDir){r.error("文件信息不完整");return}$(p=>({...p,isConverting:!0}));try{const p=u.pdfFile,S=u.outputDir;c(L=>L.map(V=>V.uid===p.uid?{...V,status:"processing",progress:10}:V));const T=p.name.replace(".pdf",""),H=`${S}/${T}.ofd`;if(!window.electronAPI)throw new Error("系统功能不可用");const _={...t,isInvoice:u.isInvoice||!1},M=await window.electronAPI.convertPDF({inputPath:p.path,outputPath:H,type:"ofd",options:_});if(c(L=>L.map(V=>V.uid===p.uid?{...V,status:M.success?"success":"error",progress:M.success?100:0,error:M.error,outputPath:M.success?H:void 0}:V)),M.success)r.success(`${p.name} 转换成功`),P(!1);else throw new Error(M.error||"转换失败")}catch(p){console.error("OFD转换错误:",p),r.error(`OFD转换失败: ${p.message}`)}finally{$(p=>({...p,isConverting:!1}))}},d=t=>{c(p=>p.filter(S=>S.uid!==t))},j=t=>{t?R(t):r.warning("无法预览该文件")},b=async()=>{r.info("正在启动外部PDF转OFD工具...");try{if(!window.electronAPI){r.error("Electron API不可用");return}if(n.length>0&&n[0].path){const p=await window.electronAPI.launchExternalPdfApp({pdfPath:n[0].path});p.success?r.success("PDF转OFD工具已启动"):(W.error({title:"PDF转OFD工具启动失败",content:e.jsxs(e.Fragment,{children:[e.jsx("p",{children:p.error||"未知错误"}),e.jsx(I,{type:"primary",onClick:F,style:{marginTop:"10px"},children:"查看详细日志"})]})}),console.error("PDF转OFD工具启动详情:",p));return}const t=await window.electronAPI.launchExternalPdfApp({pdfPath:""});t.success?r.success("PDF转OFD工具已启动"):(W.error({title:"PDF转OFD工具启动失败",content:e.jsxs(e.Fragment,{children:[e.jsx("p",{children:t.error||"未知错误"}),e.jsx(I,{type:"primary",onClick:F,style:{marginTop:"10px"},children:"查看详细日志"})]})}),console.error("PDF转OFD工具启动详情:",t))}catch(t){console.error("启动外部PDF转OFD工具失败:",t),r.error("启动外部PDF转OFD工具失败: "+(t.message||"未知错误"))}},F=async()=>{try{if(!window.electronAPI){r.error("Electron API不可用");return}const t=await window.electronAPI.readLogFile();t.success?W.info({title:"应用日志",width:800,content:e.jsx("div",{style:{maxHeight:"400px",overflow:"auto"},children:e.jsx("pre",{style:{whiteSpace:"pre-wrap",wordBreak:"break-all"},children:t.content})}),okText:"关闭"}):r.error("无法读取日志文件: "+t.error)}catch(t){r.error("读取日志失败: "+(t.message||"未知错误"))}};return e.jsxs("div",{className:"pdf-tools-container",children:[e.jsx(I,{type:"link",className:"back-button",onClick:()=>g(-1),icon:e.jsx(te,{}),children:"返回"}),e.jsx(ne,{className:"page-title",children:"PDF格式转换"}),e.jsx(de,{className:"page-subtitle",children:"将PDF文件转换为您需要的格式，或将其他文件转为PDF"}),e.jsx("div",{className:"steps-container",children:e.jsx(Ee,{current:w,className:"custom-steps",onChange:Q,items:[{title:"选择转换方向",icon:e.jsx("div",{className:"step-number",children:"1"})},{title:"选择目标格式",icon:e.jsx("div",{className:"step-number",children:"2"})},{title:"上传文件",icon:e.jsx("div",{className:"step-number",children:"3"})}]})}),w===0&&e.jsxs("div",{className:"conversion-direction",children:[e.jsx(ne,{level:4,className:"section-title",children:"请选择转换方向"}),e.jsxs("div",{className:"direction-buttons",children:[e.jsx(Y,{className:`direction-card ${C==="pdfToOther"?"selected":""}`,onClick:()=>{G("pdfToOther"),q()},children:e.jsxs("div",{className:"direction-content",children:[e.jsx("div",{className:"direction-icon",children:e.jsx(le,{})}),e.jsx("div",{className:"direction-title",children:"PDF转其他格式"}),e.jsx("div",{className:"direction-desc",children:".pdf → 其他格式"})]})}),e.jsx(Y,{className:`direction-card ${C==="otherToPdf"?"selected":""}`,onClick:()=>{G("otherToPdf"),q()},children:e.jsxs("div",{className:"direction-content",children:[e.jsx("div",{className:"direction-icon",children:e.jsx(le,{})}),e.jsx("div",{className:"direction-title",children:"其他格式转PDF"}),e.jsx("div",{className:"direction-desc",children:"其他格式 → .pdf"})]})})]})]}),w===1&&e.jsxs("div",{className:"format-selection",children:[e.jsx(ne,{level:4,className:"section-title",children:"请选择目标格式"}),e.jsx("div",{className:"format-grid",children:x.map(t=>e.jsx(Y,{className:`format-card ${s===t.key?"selected":""}`,onClick:()=>{h(t.key),t.key==="ofd"?b():q()},bordered:!1,children:e.jsxs("div",{className:"format-content",children:[e.jsx("div",{className:"icon-circle",style:{backgroundColor:t.color},children:t.icon}),e.jsxs("div",{className:"format-info",children:[e.jsx("div",{className:"format-title",children:t.title}),e.jsx("div",{className:"format-desc",children:t.description})]}),s===t.key&&e.jsx("div",{className:"selected-indicator",children:e.jsx(ue,{})})]})},t.key))})]}),w===2&&e.jsx("div",{className:"upload-container",children:e.jsx(ns,{multiple:!0,accept:".pdf",beforeUpload:y,showUploadList:!1,className:"upload-area",disabled:a||o,children:e.jsx("div",{className:"upload-content",children:o?e.jsxs(e.Fragment,{children:[e.jsx(be,{size:"large"}),e.jsx("p",{className:"upload-text",children:"正在分析文件..."})]}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"upload-icon-circle",children:e.jsx(Be,{className:"upload-icon"})}),e.jsx("p",{className:"upload-text",children:"拖放PDF文件到这里"}),e.jsx("p",{className:"upload-hint",children:"或"}),e.jsx(I,{type:"primary",size:"large",className:"select-file-btn",children:"选择文件"}),e.jsxs("p",{className:"file-limits",children:[C==="pdfToOther"?"支持PDF格式":"支持DOC、DOCX、XLS、XLSX、PPT、PPTX、JPG、PNG等格式",e.jsx("br",{}),"单个文件最大支持20MB"]})]})})})}),n.length>0&&e.jsxs("div",{className:"file-list",children:[e.jsx(ne,{level:5,className:"file-list-title",children:"已上传的文件"}),n.map(t=>e.jsxs(Y,{className:`file-card ${t.status==="success"?"success":t.status==="error"?"error":""}`,bordered:!1,children:[e.jsxs("div",{className:"file-info",children:[e.jsx(de,{strong:!0,className:"file-name",children:t.name}),e.jsx(de,{type:"secondary",className:"file-size",children:z(t.originalSize)}),t.status==="success"&&e.jsxs("div",{className:"file-success",children:[e.jsx(ue,{})," 转换成功"]}),t.status==="error"&&e.jsxs("div",{className:"file-error",children:["转换失败: ",t.error]})]}),e.jsxs(oe,{children:[e.jsx(I,{type:"text",icon:e.jsx(ze,{}),className:"action-button",onClick:()=>j(t.preview),title:"预览"}),e.jsx(I,{type:"text",icon:e.jsx(Pe,{}),className:"action-button",onClick:()=>d(t.uid),title:"删除"})]})]},t.uid))]}),n.length>0&&e.jsx("div",{className:"button-container",children:e.jsx(I,{type:"primary",size:"large",block:!0,icon:e.jsx(qe,{}),onClick:D,loading:a,className:"convert-button",children:"开始转换"})}),e.jsx(W,{open:!!N,footer:null,onCancel:()=>R(null),width:800,className:"preview-modal",children:N&&e.jsx("iframe",{src:N,style:{width:"100%",height:"600px"},title:"PDF Preview"})}),e.jsx(rs,{visible:O,onClose:()=>P(!1),onConvert:l,pdfPreview:((B=u.pdfFile)==null?void 0:B.preview)||null,pdfFileName:((U=u.pdfFile)==null?void 0:U.name)||"",isConverting:!!u.isConverting,isInvoice:!!u.isInvoice})]})};const{Text:os,Title:we,Paragraph:Ns}=se,{Dragger:as}=fe,ls=()=>{const g=ee(),[s,h]=m.useState([]),[n,c]=m.useState({quality:85,maxWidth:1920,format:"jpg"});m.useState(null);const[a,f]=m.useState(!1),[N,R]=m.useState("highQuality"),O=async o=>{if(console.log("上传文件:",o),o.size>20*1024*1024)return r.error(`${o.name} 超过20MB限制`),!1;if(!o.type.startsWith("image/"))return r.error(`${o.name} 不是有效的图片文件`),!1;try{const x=new FileReader,i=await new Promise((E,z)=>{x.onload=()=>{typeof x.result=="string"?E(x.result):z(new Error("Failed to read file"))},x.onerror=()=>z(x.error),x.readAsDataURL(o)}),D=await P(i),Q=D?`${D.width} × ${D.height} px`:void 0,q={uid:o.name+Date.now(),name:o.name,status:"pending",progress:0,originalSize:o.size,preview:i,originFileObj:o,originalDimensions:Q};if(h(E=>[...E,q]),window.electronAPI)try{const E=await window.electronAPI.uploadImage({dataUrl:i,fileName:o.name});E.success?(h(z=>z.map(l=>l.uid===q.uid?{...l,path:E.filePath}:l)),r.success(`${o.name} 上传成功`)):(r.error(`${o.name} 上传失败: ${E.error}`),h(z=>z.filter(l=>l.uid!==q.uid)))}catch(E){r.error(`上传文件时出错: ${E.message||"未知错误"}`),h(z=>z.filter(l=>l.uid!==q.uid))}else r.error("系统功能不可用，请重启应用")}catch(x){r.error(`${o.name} 处理失败: ${x.message||"未知错误"}`)}return!1},P=o=>new Promise(v=>{const x=new Image;x.onload=()=>{v({width:x.width,height:x.height})},x.onerror=()=>{v(null)},x.src=o}),u=async o=>{const v=s.findIndex(x=>x.uid===o.uid);if(v!==-1)try{if(h(x=>{const y=[...x];return y[v]={...y[v],status:"processing",progress:10},y}),window.electronAPI){const x=n.format,i=`${o.name.split(".").slice(0,-1).join(".")}_压缩.${x}`,D=await window.electronAPI.processImage({inputData:o.preview,fileName:i,options:{quality:n.quality,format:n.format,maxWidth:n.maxWidth}});if(D.success){const Q=await P(D.data),q=Q?`${Q.width} × ${Q.height} px`:void 0,E=o.originalSize&&D.size?((o.originalSize-D.size)/o.originalSize*100).toFixed(0)+"%":void 0;h(z=>{const l=[...z];return l[v]={...l[v],status:"success",progress:100,processedSize:D.size,processedPath:D.tempPath,preview:D.data,compressionRatio:E,compressedDimensions:q},l}),r.success(`${o.name} 处理成功`)}else throw new Error(D.error||"处理失败")}}catch(x){h(y=>{const i=[...y];return i[v]={...i[v],status:"error",progress:0,error:x.message||"处理失败"},i}),r.error(`处理失败: ${x.message||"未知错误"}`)}},$=async()=>{if(s.length===0){r.warning("请先添加图片");return}const o=s.filter(v=>v.status!=="success"&&v.status!=="processing");if(o.length===0){r.info("没有需要处理的文件");return}f(!0);try{for(const y of o)await u(y),await new Promise(i=>setTimeout(i,300));const x=(await new Promise(y=>{h(i=>(y(i),i))})).filter(y=>y.status==="success");if(x.length>0)if(window.electronAPI){const y=await window.electronAPI.selectSavePath({defaultName:"选择保存目录"});if(y!=null&&y.success){const i=await window.electronAPI.saveBatchImages({files:x.map(D=>({tempPath:D.processedPath,fileName:`${D.name.split(".").slice(0,-1).join(".")}_压缩.${n.format}`})),outputDir:y.filePath});if(i!=null&&i.success)r.success("所有文件保存成功！"),h([]);else throw new Error((i==null?void 0:i.error)||"保存文件失败")}}else throw new Error("系统功能不可用，请重启应用");else r.warning("没有处理成功的文件需要保存");r.success("所有文件处理完成！")}catch(v){r.error(`批量处理过程中发生错误: ${v.message||"未知错误"}`)}finally{f(!1)}},w=o=>{if(!o)return"未知";const v=["B","KB","MB","GB"];let x=0,y=o;for(;y>=1024&&x<v.length-1;)y/=1024,x++;return`${y.toFixed(2)} ${v[x]}`},k=o=>{switch(R(o),o){case"highQuality":c({...n,quality:90});break;case"balanced":c({...n,quality:75});break;case"maximum":c({...n,quality:50});break}},C=()=>{h([]),r.success("已清除所有图片")},G=s.length;return e.jsxs("div",{className:"image-tools-container",children:[e.jsx(I,{type:"link",className:"back-button",onClick:()=>g(-1),icon:e.jsx(te,{}),children:"返回"}),e.jsx(we,{className:"page-title",children:"图片压缩工具"}),e.jsx(os,{className:"page-subtitle",children:"优化图片尺寸，减小文件体积，保持清晰度"}),e.jsxs(Y,{className:"main-content-card",children:[e.jsxs("div",{className:"upload-container",children:[e.jsx(as,{multiple:!0,accept:".jpg,.jpeg,.png,.webp,.heic",beforeUpload:O,showUploadList:!1,className:"upload-area",disabled:a,children:e.jsxs("div",{className:"upload-content",children:[s.length>0&&!s.every(o=>o.status==="success")?e.jsx("div",{className:"thumbnail-preview",children:s.map((o,v)=>v<3&&o.status!=="success"&&e.jsx("div",{className:"thumbnail-item",children:e.jsx("img",{src:o.preview,alt:o.name})},o.uid))}):e.jsx(e.Fragment,{children:e.jsxs("div",{className:"preset-thumbnails",children:[e.jsx("div",{className:"preset-thumbnail blue",children:e.jsxs("div",{style:{width:"100%",height:"100%",position:"relative"},children:[e.jsx("div",{style:{position:"absolute",left:"10px",top:"10px",width:"10px",height:"10px",borderRadius:"50%",backgroundColor:"white"}}),e.jsx("div",{style:{position:"absolute",bottom:0,left:0,width:"100%",height:"40%",background:"linear-gradient(to top, white 0%, rgba(255,255,255,0) 100%)"}})]})}),e.jsx("div",{className:"preset-thumbnail pink",children:e.jsxs("div",{style:{width:"100%",height:"100%",position:"relative"},children:[e.jsx("div",{style:{position:"absolute",left:"10px",top:"10px",width:"10px",height:"10px",borderRadius:"50%",backgroundColor:"white"}}),e.jsx("div",{style:{position:"absolute",bottom:0,left:0,width:"100%",height:"40%",background:"linear-gradient(to top, white 0%, rgba(255,255,255,0) 100%)"}})]})}),e.jsx("div",{className:"preset-thumbnail green",children:e.jsxs("div",{style:{width:"100%",height:"100%",position:"relative"},children:[e.jsx("div",{style:{position:"absolute",left:"10px",top:"10px",width:"10px",height:"10px",borderRadius:"50%",backgroundColor:"white"}}),e.jsx("div",{style:{position:"absolute",bottom:0,left:0,width:"100%",height:"40%",background:"linear-gradient(to top, white 0%, rgba(255,255,255,0) 100%)"}})]})})]})}),e.jsx("p",{className:"upload-text",children:"拖放图片到这里上传"}),e.jsx("p",{className:"upload-hint",children:"支持JPG、PNG、WEBP、HEIC等多种格式"}),e.jsx(I,{type:"primary",className:"select-file-btn",children:"选择文件"})]})}),G>0&&s.some(o=>o.status!=="success")&&e.jsxs("div",{className:"files-count",children:["已选择",s.filter(o=>o.status!=="success").length,"张图片",e.jsx("span",{className:"count-badge",children:s.filter(o=>o.status!=="success").length})]})]}),e.jsxs("div",{className:"compress-options",children:[e.jsx(we,{level:5,className:"section-title",children:"压缩选项"}),e.jsxs("div",{className:"option-buttons",children:[e.jsx("div",{className:`option-button ${N==="highQuality"?"active":""}`,onClick:()=>k("highQuality"),children:e.jsx("span",{children:"保持高画质"})}),e.jsx("div",{className:`option-button ${N==="balanced"?"active":""}`,onClick:()=>k("balanced"),children:e.jsx("span",{children:"平衡模式"})}),e.jsx("div",{className:`option-button ${N==="maximum"?"active":""}`,onClick:()=>k("maximum"),children:e.jsx("span",{children:"最大压缩"})}),e.jsx("div",{className:`option-button ${N==="custom"?"active":""}`,onClick:()=>k("custom"),children:e.jsx("span",{children:"自定义设置"})})]}),e.jsxs("div",{className:"custom-settings",children:[e.jsxs("div",{className:"setting-item",children:[e.jsxs("div",{className:"setting-label",children:[e.jsx("span",{children:"质量"}),e.jsxs("span",{className:"setting-value",children:[n.quality,"%"]})]}),e.jsxs("div",{className:"slider-container",children:[e.jsx("div",{className:"progress-bg"}),e.jsx("div",{className:"progress-fill",style:{width:`${n.quality/100*520}px`}}),e.jsx(pe,{value:n.quality,onChange:o=>c({...n,quality:o}),min:0,max:100,className:"custom-slider"})]})]}),e.jsxs("div",{className:"setting-item",children:[e.jsxs("div",{className:"setting-label",children:[e.jsx("span",{children:"最大宽度"}),e.jsxs("span",{className:"setting-value",children:[n.maxWidth,"px"]})]}),e.jsxs("div",{className:"slider-container",children:[e.jsx("div",{className:"progress-bg"}),e.jsx("div",{className:"progress-fill",style:{width:`${n.maxWidth/3840*520}px`}}),e.jsx(pe,{value:n.maxWidth,onChange:o=>c({...n,maxWidth:o}),min:800,max:3840,className:"custom-slider"})]})]}),e.jsxs("div",{className:"setting-item",children:[e.jsx("div",{className:"setting-label",children:e.jsx("span",{children:"输出格式"})}),e.jsxs("div",{className:"format-buttons",children:[e.jsx("div",{className:`format-button ${n.format==="jpg"?"active":""}`,onClick:()=>c({...n,format:"jpg"}),children:"JPG"}),e.jsx("div",{className:`format-button ${n.format==="png"?"active":""}`,onClick:()=>c({...n,format:"png"}),children:"PNG"}),e.jsx("div",{className:`format-button ${n.format==="webp"?"active":""}`,onClick:()=>c({...n,format:"webp"}),children:"WEBP"}),e.jsx("div",{className:`format-button ${n.format==="avif"?"active":""}`,onClick:()=>c({...n,format:"avif"}),children:"AVIF"})]})]})]}),s.length>0&&e.jsxs("div",{className:"preview-container",children:[e.jsxs("div",{className:"preview-section original",children:[e.jsx("h3",{className:"preview-title",children:"原图"}),e.jsx("p",{className:"preview-filename",children:s[0].name}),e.jsx("p",{className:"preview-size",children:w(s[0].originalSize)}),e.jsx("p",{className:"preview-dimensions",children:s[0].originalDimensions})]}),e.jsx("div",{className:"preview-divider"}),e.jsxs("div",{className:"preview-section compressed",children:[e.jsx("h3",{className:"preview-title",children:"压缩后"}),e.jsxs("p",{className:"preview-filename",children:[s[0].name.split(".").slice(0,-1).join("."),"_压缩.",n.format]}),e.jsx("p",{className:"preview-size compressed-size",children:s[0].processedSize?w(s[0].processedSize):s[0].originalSize?"预计 "+w(s[0].originalSize*.3):"正在计算..."}),e.jsx("p",{className:"preview-dimensions",children:s[0].compressedDimensions||s[0].originalDimensions}),s[0].compressionRatio&&e.jsxs("div",{className:"saving-badge",children:["节省 ",s[0].compressionRatio]})]})]}),e.jsxs("div",{className:"action-buttons",children:[e.jsx(I,{className:"add-more-button",onClick:C,children:"添加更多图片"}),e.jsx(I,{type:"primary",className:"process-button",onClick:$,loading:a,disabled:s.length===0,children:"下载压缩后的图片"})]})]})]})]})},{Text:ie}=se,{TextArea:cs}=ge,ds=()=>{const g=ee(),[s,h]=m.useState(""),[n,c]=m.useState("url"),[a,f]=m.useState({size:500,errorCorrectionLevel:"M",foregroundColor:"#000000",format:"png"}),[N,R]=m.useState(""),[O,P]=m.useState(!1),[u,$]=m.useState(!1),[w,k]=m.useState(""),[C,G]=m.useState(!1),o=async()=>{if(!s){r.error("请输入内容");return}P(!0);try{if(window.electronAPI){const i=await window.electronAPI.generateQR({content:s,options:{...a,type:n}});i.success?(R(i.dataUrl),i.isText&&i.textContent?(k(i.textContent),G(!0)):(k(""),G(!1)),r.success("二维码生成成功！")):r.error("生成失败："+i.error)}else r.error("无法访问Electron API")}catch(i){r.error("生成过程中发生错误"),console.error("二维码生成错误:",i)}finally{P(!1)}},v=async()=>{if(!N){r.error("请先生成二维码");return}$(!0);try{if(window.electronAPI){const i=await window.electronAPI.saveQR({dataUrl:N,format:a.format});i.success?r.success("二维码已保存！"):i.reason==="canceled"||r.error("保存失败："+(i.error||"未知错误"))}else r.error("无法访问Electron API")}catch(i){r.error("下载过程中发生错误"),console.error("二维码下载错误:",i)}finally{$(!1)}},x=()=>{h(""),N&&(R(""),k(""),G(!1),r.success("内容已清除"))},y=[{value:"#000000",label:"黑色"},{value:"#0071e3",label:"蓝色"},{value:"#fa3c52",label:"红色"},{value:"#38b6ff",label:"浅蓝"},{value:"#6a0dad",label:"紫色"}];return e.jsxs("div",{className:"qrcode-container",children:[e.jsxs("button",{className:"back-button",onClick:()=>g(-1),children:[e.jsx(te,{style:{marginRight:8}})," 返回"]}),e.jsx("h1",{className:"page-title",children:"二维码生成"}),e.jsx("div",{className:"page-actions",children:e.jsx(I,{onClick:()=>g("/qrcode/batch"),type:"default",icon:e.jsx(me,{}),style:{marginBottom:20},children:"批量生成二维码"})}),e.jsxs("div",{className:"qrcode-content",children:[e.jsxs("div",{className:"qrcode-settings-panel",children:[e.jsxs("div",{className:"form-control",children:[e.jsx("label",{children:"内容"}),e.jsx(cs,{value:s,onChange:i=>h(i.target.value),placeholder:"请输入内容，如网址、文本等",rows:4,style:{borderRadius:8,resize:"none"}})]}),e.jsxs("div",{className:"form-control",children:[e.jsx("label",{children:"内容类型"}),e.jsxs(A.Group,{value:n,onChange:i=>c(i.target.value),buttonStyle:"solid",style:{display:"flex",gap:"10px"},children:[e.jsx(A.Button,{value:"url",style:{borderRadius:"18px",height:"36px",display:"flex",alignItems:"center",justifyContent:"center",width:"80px"},children:"URL"}),e.jsx(A.Button,{value:"text",style:{borderRadius:"18px",height:"36px",display:"flex",alignItems:"center",justifyContent:"center",width:"80px"},children:"文本"}),e.jsx(A.Button,{value:"vcard",style:{borderRadius:"18px",height:"36px",display:"flex",alignItems:"center",justifyContent:"center",width:"80px"},children:"vCard"})]})]}),e.jsx(ie,{strong:!0,style:{fontSize:18,display:"block",marginBottom:16,marginTop:24},children:"设置"}),e.jsxs("div",{className:"form-control",children:[e.jsx("label",{children:"大小"}),e.jsxs("div",{className:"slider-container",children:[e.jsx(pe,{value:a.size,min:100,max:1e3,step:50,onChange:i=>f({...a,size:i}),marks:{100:"100px",500:"500px",1e3:"1000px"},trackStyle:{backgroundColor:"#6a0dad"},handleStyle:{borderColor:"#6a0dad",backgroundColor:"#fff"}}),e.jsxs("span",{className:"slider-value",children:[a.size,"px"]})]})]}),e.jsxs("div",{className:"form-control",children:[e.jsx("label",{children:"误差修正级别"}),e.jsxs(A.Group,{value:a.errorCorrectionLevel,onChange:i=>f({...a,errorCorrectionLevel:i.target.value}),buttonStyle:"solid",style:{display:"flex",gap:"10px"},children:[e.jsx(A.Button,{value:"L",style:{borderRadius:"15px",height:"30px",width:"30px",display:"flex",alignItems:"center",justifyContent:"center",padding:0},children:"L"}),e.jsx(A.Button,{value:"M",style:{borderRadius:"15px",height:"30px",width:"30px",display:"flex",alignItems:"center",justifyContent:"center",padding:0},children:"M"}),e.jsx(A.Button,{value:"H",style:{borderRadius:"15px",height:"30px",width:"30px",display:"flex",alignItems:"center",justifyContent:"center",padding:0},children:"H"})]})]}),e.jsxs("div",{className:"form-control",children:[e.jsx("label",{children:"前景色"}),e.jsx("div",{className:"color-options",children:y.map(i=>e.jsx("div",{className:`color-circle ${a.foregroundColor===i.value?"selected":""}`,style:{backgroundColor:i.value},onClick:()=>f({...a,foregroundColor:i.value}),title:i.label},i.value))})]}),e.jsx(I,{type:"primary",size:"large",block:!0,className:"primary-button",onClick:o,loading:O,style:{marginTop:24},icon:e.jsx(je,{}),children:"生成二维码"}),e.jsx(I,{type:"default",size:"large",block:!0,onClick:x,style:{marginTop:12},icon:e.jsx(Ie,{}),children:"清除内容"})]}),e.jsxs("div",{className:"qrcode-preview-panel",children:[e.jsx("div",{className:"qrcode-preview-box",children:O?e.jsxs("div",{className:"qrcode-loading",children:[e.jsx(be,{size:"large"}),e.jsx("p",{style:{marginTop:16,color:"#666"},children:"生成中..."})]}):N?C?e.jsx("pre",{className:"qrcode-text-preview",children:w}):e.jsx("img",{src:N,alt:"QR Code",style:{maxWidth:"100%",maxHeight:"100%"}}):e.jsxs("div",{className:"qrcode-placeholder",children:[e.jsx(je,{style:{fontSize:48,color:"#ddd"}}),e.jsx(ie,{style:{color:"#666",marginTop:16},children:"预览区域"})]})}),e.jsxs("div",{className:"qrcode-download-section",children:[e.jsx(ie,{strong:!0,style:{fontSize:18,marginBottom:16,display:"block"},children:"下载选项"}),e.jsxs(A.Group,{value:a.format,onChange:i=>f({...a,format:i.target.value}),buttonStyle:"solid",style:{display:"flex",gap:"10px",justifyContent:"center",marginBottom:16},children:[e.jsx(A.Button,{value:"png",style:{borderRadius:"18px",height:"36px",display:"flex",alignItems:"center",justifyContent:"center",width:"80px"},children:"PNG"}),e.jsx(A.Button,{value:"svg",style:{borderRadius:"18px",height:"36px",display:"flex",alignItems:"center",justifyContent:"center",width:"80px"},children:"SVG"}),e.jsx(A.Button,{value:"text",style:{borderRadius:"18px",height:"36px",display:"flex",alignItems:"center",justifyContent:"center",width:"80px"},title:"ASCII文本格式，仅用于展示，不可直接扫描",children:"文本"})]}),a.format==="text"&&e.jsx(ie,{type:"warning",style:{marginBottom:16,display:"block",fontSize:12},children:"注意：文本格式是ASCII艺术字符，仅用于展示或分享文本，不可直接扫描。请使用PNG或SVG格式获取可扫描的二维码。"}),e.jsx(I,{type:"primary",size:"large",block:!0,className:"primary-button",disabled:!N||O,loading:u,onClick:v,icon:e.jsx(Se,{}),style:{height:"40px",borderRadius:"20px"},children:"下载二维码"})]})]})]})]})},{Text:Z,Title:hs}=se,{TextArea:us}=ge,he=()=>Date.now().toString(36)+Math.random().toString(36).substr(2,5),ps=()=>{const g=ee(),[s,h]=m.useState([]),[n,c]=m.useState("text"),[a,f]=m.useState(!1),[N,R]=m.useState(!1),[O,P]=m.useState("png"),[u,$]=m.useState(null),[w,k]=m.useState(!1),C=()=>{const l={id:he(),content:"",type:n,status:"pending"};h([...s,l])},G=l=>{h(s.filter(d=>d.id!==l))},o=(l,d)=>{h(s.map(j=>j.id===l?{...j,content:d,status:"pending"}:j))},v=l=>{try{const j=l.split(/\r?\n/).filter(b=>b.trim()).map(b=>({id:he(),content:b.trim(),type:n,status:"pending"}));j.length>0?(h([...s,...j]),r.success(`成功导入${j.length}条数据`)):r.error("没有发现有效数据")}catch(d){r.error("解析文件失败"),console.error("解析文件错误:",d)}},x={name:"file",multiple:!1,accept:".txt,.csv",showUploadList:!1,beforeUpload:l=>{const d=new FileReader;return d.onload=j=>{j.target&&typeof j.target.result=="string"&&v(j.target.result)},d.readAsText(l),!1}},y=()=>{W.confirm({title:"批量导入文本",width:600,content:e.jsxs("div",{children:[e.jsx("p",{children:"每行一个内容，将自动生成对应的二维码。支持批量粘贴，最多支持1000行。"}),e.jsx(us,{rows:10,placeholder:`请粘贴文本内容，每行将生成一个二维码
示例：
https://www.example1.com
https://www.example2.com
文本内容1
文本内容2`,id:"batchTextInput",style:{marginTop:"10px"}})]}),onOk(){const l=document.getElementById("batchTextInput");if(l&&l.value){const d=l.value.split(/\r?\n/).map(b=>b.trim()).filter(b=>b.length>0);if(d.length===0){r.error("没有检测到有效内容");return}if(d.length>1e3){r.error("超出最大行数限制（1000行），请减少内容后重试");return}d.some(b=>b.startsWith("http://")||b.startsWith("https://")||b.startsWith("www."))&&n!=="url"?W.confirm({title:"检测到URL",content:"检测到内容中可能包含URL，是否自动切换到URL类型？",onOk(){c("url"),i(d)},onCancel(){i(d)}}):i(d)}},okText:"确认导入",cancelText:"取消"})},i=l=>{const d=l.map(j=>({id:he(),content:j,type:n,status:"pending"}));h(j=>[...j,...d]),r.success(`成功导入 ${d.length} 条数据`),setTimeout(()=>{const j=document.querySelector(".ant-table-body");j&&(j.scrollTop=j.scrollHeight)},100)},D=async()=>{if(s.length===0){r.error("请先添加二维码内容");return}f(!0);const l=s.length;let d=0,j=0;try{const b=[...s];for(let F=0;F<b.length;F++){const B=b[F];if(B.status!=="generated"){if(!B.content.trim()){b[F]={...B,status:"error",error:"内容不能为空"},j++;continue}try{if(window.electronAPI){const U=await window.electronAPI.generateQR({content:B.content,options:{size:300,errorCorrectionLevel:"M",foregroundColor:"#000000",format:O,type:B.type}});U.success?(b[F]={...B,dataUrl:U.dataUrl,status:"generated"},d++):(b[F]={...B,status:"error",error:U.error||"生成失败"},j++)}else throw new Error("Electron API不可用")}catch(U){b[F]={...B,status:"error",error:U instanceof Error?U.message:"处理过程中发生错误"},j++}h([...b]),((F+1)%10===0||F===b.length-1)&&r.info(`已处理 ${F+1}/${l} 个二维码`)}}r.success(`批量生成完成！成功: ${d}个, 失败: ${j}个`)}catch(b){r.error("批量生成过程中发生错误"),console.error("批量生成错误:",b)}finally{f(!1)}},Q=async()=>{const l=s.filter(d=>d.status==="generated");if(l.length===0){r.error("没有可下载的二维码，请先生成二维码");return}R(!0);try{if(window.electronAPI){const d=await window.electronAPI.selectSavePath({});if(!d.success||d.reason==="canceled"){R(!1);return}const j=new Date().toISOString().replace(/[:.]/g,"-"),b=l.map((B,U)=>{const t=B.content.substring(0,20).replace(/[\\/:*?"<>|]/g,"_").replace(/\s+/g,"_").replace(/[^a-zA-Z0-9_\-.]/g,""),p=`qrcode_${B.type}_${t||U}_${U}_${j}.${O}`;return{dataUrl:B.dataUrl,fileName:p,format:O,isText:!1}});console.warn("准备保存的二维码列表:",b);const F=await window.electronAPI.saveBatchQR({qrList:b,outputDir:d.filePath});F.success?(r.success(`已保存${F.successCount}个二维码到: ${F.savedPath}`),F.failedCount>0&&r.warning(`有${F.failedCount}个二维码保存失败，请检查日志`)):r.error("保存失败: "+(F.error||"未知错误"))}else r.error("无法访问Electron API")}catch(d){console.error("批量下载错误:",d),r.error("下载过程中发生错误: "+(d instanceof Error?d.message:String(d)))}finally{R(!1)}},q=()=>{if(s.length===0){r.info("当前没有二维码项");return}W.confirm({title:"确认清除",content:"确定要清除所有二维码项吗？此操作不可撤销。",okText:"确认清除",cancelText:"取消",onOk(){h([]),r.success("已清除所有内容")}})},E=l=>{$(l),k(!0)},z=[{title:"内容",dataIndex:"content",key:"content",render:(l,d)=>e.jsx(ge,{value:l,onChange:j=>o(d.id,j.target.value),placeholder:"输入二维码内容",disabled:a})},{title:"类型",dataIndex:"type",key:"type",width:100,render:l=>({url:"URL",text:"文本",vcard:"vCard"})[l]||l},{title:"状态",dataIndex:"status",key:"status",width:120,render:(l,d)=>l==="generated"?e.jsx(Z,{type:"success",children:"已生成"}):l==="error"?e.jsx(We,{title:d.error,children:e.jsx(Z,{type:"danger",children:"失败"})}):e.jsx(Z,{type:"warning",children:"待生成"})},{title:"操作",key:"action",width:200,render:(l,d)=>e.jsxs(oe,{size:"small",children:[d.status==="generated"&&e.jsx(I,{type:"link",size:"small",icon:e.jsx(me,{}),onClick:()=>E(d),children:"预览"}),e.jsx(He,{title:"确定要删除这项吗?",onConfirm:()=>G(d.id),children:e.jsx(I,{type:"link",danger:!0,size:"small",icon:e.jsx(Pe,{}),children:"删除"})})]})}];return e.jsxs("div",{className:"qrcode-batch-container",children:[e.jsxs("button",{className:"back-button",onClick:()=>g("/qrcode"),children:[e.jsx(te,{style:{marginRight:8}})," 返回"]}),e.jsx(hs,{level:2,className:"page-title",children:"批量二维码生成"}),e.jsxs("div",{className:"batch-control-panel",children:[e.jsxs("div",{className:"batch-settings",children:[e.jsxs("div",{className:"form-control",children:[e.jsx(Z,{strong:!0,children:"内容类型"}),e.jsxs(A.Group,{value:n,onChange:l=>c(l.target.value),optionType:"button",buttonStyle:"solid",children:[e.jsx(A.Button,{value:"text",children:"文本"}),e.jsx(A.Button,{value:"url",children:"URL"}),e.jsx(A.Button,{value:"vcard",children:"vCard"})]})]}),e.jsxs("div",{className:"form-control",children:[e.jsx(Z,{strong:!0,children:"输出格式"}),e.jsxs(A.Group,{value:O,onChange:l=>P(l.target.value),optionType:"button",buttonStyle:"solid",children:[e.jsx(A.Button,{value:"png",children:"PNG"}),e.jsx(A.Button,{value:"svg",children:"SVG"})]})]})]}),e.jsx("div",{className:"batch-import-tools",children:e.jsxs(oe,{wrap:!0,children:[e.jsx(I,{icon:e.jsx(_e,{}),onClick:C,disabled:a,children:"添加项"}),e.jsx(fe,{...x,children:e.jsx(I,{icon:e.jsx(Ce,{}),disabled:a,children:"导入CSV"})}),e.jsx(I,{icon:e.jsx(Me,{}),onClick:y,disabled:a,type:"primary",children:"粘贴文本"}),e.jsx(I,{icon:e.jsx(Ie,{}),onClick:q,disabled:a||s.length===0,danger:!0,children:"清除所有"})]})})]}),e.jsx("div",{className:"batch-data-table",children:e.jsx(Qe,{dataSource:s,columns:z,rowKey:"id",pagination:!1,scroll:{y:400},loading:a})}),e.jsx("div",{className:"batch-control-panel",children:e.jsxs(oe,{wrap:!0,children:[e.jsx(I,{icon:e.jsx(me,{}),onClick:D,loading:a,type:"primary",disabled:s.length===0,children:"生成全部二维码"}),e.jsx(I,{icon:e.jsx(Se,{}),onClick:Q,loading:N,disabled:s.filter(l=>l.status==="generated").length===0,children:"下载全部二维码"})]})}),e.jsx(W,{title:"二维码预览",open:w,onCancel:()=>k(!1),footer:null,width:400,children:u&&u.dataUrl&&e.jsxs("div",{className:"qr-preview-modal",children:[e.jsx("img",{src:u.dataUrl,alt:"QR Code Preview",style:{maxWidth:"100%"}}),e.jsxs("div",{style:{marginTop:16,textAlign:"center"},children:[e.jsx(Z,{strong:!0,children:"内容:"})," ",u.content]})]})})]})},{Title:ms,Paragraph:xs}=se,fs=()=>{const g=ee(),s=[{question:"如何使用PDF转换功能？",answer:"在PDF工具页面，选择需要的转换格式（Word、Excel、PPT等），然后将PDF文件拖拽到上传区域或点击选择文件。系统会自动开始转换，完成后可以下载转换后的文件。"},{question:"图片压缩后质量如何？",answer:"我们使用智能压缩算法，在保证视觉效果的同时最大程度减小文件体积。您可以通过调节压缩质量（0-100%）来平衡图片质量和文件大小。"},{question:"支持哪些图片格式？",answer:"目前支持最常用的图片格式：JPG、PNG、WebP。您可以在压缩时选择输出格式，方便跨平台使用。"},{question:"二维码支持什么内容？",answer:"支持URL链接、纯文本内容、vCard名片等格式。生成的二维码可以自定义大小、颜色，并支持导出为PNG或SVG格式。"}],h={email:"support@toolbox.com",website:"https://www.toolbox.com",github:"https://github.com/toolbox"};return e.jsxs("div",{children:[e.jsx(I,{icon:e.jsx(te,{}),type:"link",onClick:()=>g(-1),style:{marginBottom:24},children:"返回"}),e.jsx(ms,{level:2,style:{textAlign:"center",marginBottom:48},children:"帮助与支持"}),e.jsx(Y,{title:"常见问题",style:{marginBottom:32},children:e.jsx(X,{dataSource:s,renderItem:n=>e.jsx(X.Item,{children:e.jsx(X.Item.Meta,{title:n.question,description:n.answer})})})}),e.jsxs(Y,{title:"联系我们",children:[e.jsx(xs,{children:"如果您在使用过程中遇到任何问题，或有任何建议，请通过以下方式联系我们："}),e.jsxs(X,{children:[e.jsxs(X.Item,{children:[e.jsx("strong",{children:"邮箱："})," ",h.email]}),e.jsxs(X.Item,{children:[e.jsx("strong",{children:"官网："})," ",h.website]}),e.jsxs(X.Item,{children:[e.jsx("strong",{children:"GitHub："})," ",h.github]})]})]})]})};const gs=()=>{const[g,s]=m.useState(!1),[h,n]=m.useState(null),[c,a]=m.useState(null),f=De(),N=ee(),R=m.useCallback(P=>{var u;if(console.log("接收到菜单操作:",P),typeof P=="object"){const{action:$,...w}=P;switch($){case"search-text":console.log(`搜索文本: ${w.text}`),w.text&&window.confirm(`要搜索 "${w.text}" 吗？`)&&window.open(`https://www.baidu.com/s?wd=${encodeURIComponent(w.text)}`,"_blank");break;case"save-image":if(console.log(`保存图片: ${w.src}`),w.src&&((u=window.electronAPI)!=null&&u.selectSavePath)){const k=w.src.split("/").pop()||"image.png";window.electronAPI.selectSavePath({defaultName:k}).then(C=>{C.success&&C.filePath&&console.log(`保存图片到: ${C.filePath}`)}).catch(C=>console.error("保存图片失败:",C))}break;case"copy-image":console.log(`复制图片: ${w.src}`);break;default:console.log(`未处理的对象操作: ${$}`)}return}switch(P){case"new-workspace":N("/");break;case"save":f.pathname.includes("/pdf")?console.log("执行PDF工具保存操作"):f.pathname.includes("/image")?console.log("执行图片工具保存操作"):f.pathname.includes("/qrcode")&&console.log("执行二维码工具保存操作");break;case"save-as":console.log("执行另存为操作");break;case"check-update":console.log("检查更新");break;case"go-home":console.log("返回首页"),N("/");break;default:console.log(`未处理的菜单操作: ${P}`)}},[f.pathname,N]),O=m.useCallback(P=>{var $;console.log(`接收到文件打开事件: ${P.path}`);const u=($=P.path.split(".").pop())==null?void 0:$.toLowerCase();u&&(u==="pdf"?(N("/pdf"),sessionStorage.setItem("openFile",JSON.stringify(P))):["jpg","jpeg","png","webp"].includes(u)&&(N("/image"),sessionStorage.setItem("openFile",JSON.stringify(P))))},[N]);return m.useEffect(()=>{console.log("====== 应用初始化开始 ======"),console.log("App 组件已加载"),console.log("当前路径:",f.pathname);let P=null;try{const u=window.electronAPI;if(console.log("检测electronAPI:",u?"存在":"不存在"),u){console.log("检测到Electron环境，正在获取信息...");const $=Object.keys(u);console.log("可用API方法:",$);let w,k;try{typeof u.onMenuAction=="function"?(w=u.onMenuAction(R),console.log("菜单操作监听器注册成功")):console.warn("onMenuAction 不是一个函数，类型:",typeof u.onMenuAction),typeof u.onFileOpened=="function"?(k=u.onFileOpened(O),console.log("文件打开监听器注册成功")):console.warn("onFileOpened 不是一个函数，类型:",typeof u.onFileOpened)}catch(C){console.error("注册事件监听器失败:",C)}try{console.log("正在获取应用信息..."),u.getAppInfo().then(C=>{console.log("获取Electron环境信息成功:",C),n(C)}).catch(C=>{console.error("获取Electron信息失败:",C),a(`获取Electron信息失败: ${C.message||"未知错误"}`)}).finally(()=>{console.log("应用信息获取结束，设置应用为就绪状态"),s(!0)})}catch(C){console.error("调用Electron API失败:",C),a(`Electron API调用失败: ${C.message||"未知错误"}`),s(!0)}return()=>{P&&clearTimeout(P),w&&w(),k&&k(),console.log("应用组件卸载，清理资源")}}else console.log("未检测到Electron环境，可能在浏览器中运行"),s(!0)}catch(u){console.error("获取Electron信息失败:",u),a("无法连接到Electron API，请确保应用正确启动"),s(!0)}P=setTimeout(()=>{console.log("应用初始化超时，强制显示界面"),g||s(!0)},3e3),console.log("====== 应用初始化请求完成 ======")},[f.pathname,R,O]),m.useEffect(()=>{g&&console.log("====== 应用已准备就绪 ======")},[g]),g?e.jsxs("div",{className:"app-container",children:[e.jsxs("header",{className:"header",children:[e.jsx("div",{className:"logo",children:"工具箱"}),e.jsx("nav",{className:"main-nav",children:e.jsxs("ul",{children:[e.jsx("li",{children:e.jsx(K,{to:"/",children:"首页"})}),e.jsx("li",{children:e.jsx(K,{to:"/pdf",children:"PDF工具"})}),e.jsx("li",{children:e.jsx(K,{to:"/image",children:"图片工具"})}),e.jsx("li",{children:e.jsx(K,{to:"/qrcode",children:"二维码"})}),e.jsx("li",{children:e.jsx(K,{to:"/qrcode/batch",children:"二维码批量生成"})}),e.jsx("li",{children:e.jsx(K,{to:"/support",children:"支持"})})]})})]}),e.jsxs("main",{className:"content",children:[h&&e.jsxs("div",{className:"electron-info",children:["运行于 Electron ",h.version," (",h.platform,")"]}),e.jsxs(Te,{children:[e.jsx(J,{path:"/",element:e.jsx(es,{})}),e.jsx(J,{path:"/pdf",element:e.jsx(is,{})}),e.jsx(J,{path:"/image",element:e.jsx(ls,{})}),e.jsx(J,{path:"/qrcode",element:e.jsx(ds,{})}),e.jsx(J,{path:"/qrcode/batch",element:e.jsx(ps,{})}),e.jsx(J,{path:"/support",element:e.jsx(fs,{})}),e.jsx(J,{path:"*",element:e.jsxs("div",{className:"placeholder-page",children:[e.jsx("h2",{children:"页面不存在"}),e.jsxs("p",{children:["当前路径: ",f.pathname]}),e.jsx("p",{children:"请从上方菜单选择页面"})]})})]})]}),e.jsx("footer",{className:"footer",children:e.jsxs("p",{children:["工具箱应用 © ",new Date().getFullYear()]})})]}):e.jsxs("div",{className:"loading-screen",children:[e.jsx("h2",{children:"应用加载中..."}),c&&e.jsx("p",{className:"error-message",children:c})]})};console.log("main.tsx 文件被执行");class js extends ye.Component{constructor(s){super(s),this.state={hasError:!1}}static getDerivedStateFromError(){return{hasError:!0}}componentDidCatch(s,h){console.error("React 渲染错误:",s,h)}render(){return this.state.hasError?e.jsx("div",{style:{padding:"20px",color:"red"},children:"应用加载失败，请检查控制台错误信息。"}):this.props.children}}try{const g=document.getElementById("root");if(!g)throw new Error("找不到 root 元素");console.log("找到 root 元素，开始渲染 React"),xe.createRoot(g).render(e.jsx(ye.StrictMode,{children:e.jsx(js,{children:e.jsx(Ae,{children:e.jsx(gs,{})})})})),console.log("React 渲染完成")}catch(g){console.error("React 初始化错误:",g)}
