# 更新日志

本文档记录多功能工具箱应用的所有重要变更。

## [1.5.0] - 2025-05-20

### 新增
- **PDF转OFD功能升级**：
  - 接入外部Java应用程序进行PDF转OFD处理
  - 选择PDF转OFD选项后直接启动专用转换工具
  - 智能检测文件状态，已上传文件直接处理，否则弹出选择对话框
  - 保留原有内置转换逻辑作为备用方案
  - 无缝集成外部应用，提供统一的用户体验
- **WebP图片处理功能增强**：
  - 添加WebP图片的无损压缩处理能力
  - 支持高质量WebP转换，完美保留透明度信息
  - 增加WebP格式预览缩略图生成功能
  - 添加多种WebP图片编码选项（有损/无损）
  - 优化WebP图片处理性能和稳定性
  - 增强对非标准WebP图片的兼容性支持
  - 添加断点续传功能，支持大型WebP图片的分块处理

### 优化
- 改进外部应用通信机制，提高稳定性
- 简化转换流程，提升用户体验
- 更新文档说明，增加新功能使用指南
- 优化WebP图片处理内存使用，减少大型图片处理时的内存占用
- 添加多线程支持，显著提高WebP图片批量处理速度
- 增强容错处理，提供友好的错误提示界面

### 修复
- 修复WebP转换器调用方式，解决参数传递错误问题
- 添加自动清理临时文件机制，防止磁盘空间占用
- 增加转换超时时间，提高大图片处理成功率
- 实现多级容错处理，避免应用因WebP处理错误而崩溃

## [1.4.2] - 2025-05-14

### 新增
- 添加中文应用菜单，替换原有英文菜单
  - 支持「文件」、「编辑」、「查看」、「窗口」、「帮助」五大基本功能区
  - 实现「打开文件」功能，可通过菜单直接选择PDF或图片文件
  - 添加「新建工作区」、「保存」、「另存为」等基本文件操作
  - 完善「关于」功能，显示应用详细信息
- 增加智能上下文菜单（右键菜单）
  - 根据不同操作对象提供相应功能
  - 文本选中区域：支持复制和搜索选中文本
  - 链接区域：支持在浏览器中打开链接和复制链接地址
  - 图片区域：支持保存图片和复制图片
  - 输入框区域：支持剪切、复制、粘贴和全选操作
  - 普通区域：支持刷新页面、返回首页和检查元素

### 优化
- 改进应用本地化体验，更符合中文用户习惯
- 添加菜单快捷键支持，提高操作效率
- 优化菜单操作反馈机制，操作响应更加及时
- 增强文件打开功能，可根据文件类型自动导航至相应工具

## [1.4.1] - 2025-05-14

### 修复
- 修复应用启动后显示"页面不存在"的路由问题
  - 将`BrowserRouter`替换为`HashRouter`，更适合Electron应用环境
  - 改进Electron通信机制，修复异步API调用处理
  - 优化App组件中的路由匹配和错误提示
- 修复main.js中重复注册IPC事件处理程序导致的启动失败问题
  - 解决`convert-pdf`处理程序重复注册错误
  - 改进批量处理方法中的IPC调用逻辑

### 优化
- 提升应用启动稳定性，减少白屏和路由错误
- 添加详细的路径显示在404页面，方便调试
- 完善前端与Electron API的通信机制

## [1.4.0] - 2023-05-20

### 新增
- 重新设计PDF转换界面，采用苹果风格三步骤流程设计
- 改进步骤指示器，支持点击导航在步骤间切换
- 为格式选择卡片添加选中状态指示和品牌颜色
- 增强发票检测功能，自动识别PDF发票并使用专用处理流程
- 优化文件上传区域，添加渐变背景和现代化视觉元素

### 修复
- 修复OFD转换时发票检测接口调用错误
- 解决文件卡片显示问题，添加成功/失败状态样式
- 优化移动设备响应式布局，改善小屏幕用户体验

### 优化
- 改进视觉层次结构，强调关键操作按钮
- 优化文件处理流程，提高转换效率
- 完善错误处理和状态反馈机制

## [1.3.0] - 2023-05-16

### 新增
- 全新重设计PDF转换界面，采用苹果风格的现代化设计
- 添加直观的步骤引导流程，包括转换方向选择、格式选择和文件上传
- 增加PDF与其他格式双向转换功能选择
- 使用卡片式格式选择布局，带有品牌色彩和专属图标
- 优化上传区域设计，采用渐变背景和现代元素
- 改进了响应式设计，适配不同屏幕尺寸

### 优化
- 界面交互流程优化，减少用户操作步骤
- 视觉层次优化，关键操作区域更加醒目
- 改进文件格式说明和大小限制提示

## [1.1.1] - 2025-05-14

### 修复问题

- **修复二维码批量导入和保存功能**
  - 修复了批量导入后无法正确保存二维码文件的问题
  - 优化了文件名生成逻辑，确保文件名唯一且合法
  - 添加了对文本二维码的正确处理
  - 改进了结果统计逻辑，确保所有文件都能被正确保存和计数
  - 当检测到URL内容时，自动提示切换到URL类型

- **改进用户体验**
  - 导入内容后自动滚动到列表底部
  - 跳过空内容，避免生成无效二维码
  - 提供更详细的错误信息和进度反馈

## [1.1.0] - 2025-05-14

### 新增功能

- **二维码单个保存功能**
  - 支持直接保存单个二维码到自定义路径
  - 支持PNG和SVG格式
  - 支持自定义文件名

### 修复问题

- 修复了二维码单个保存功能缺失的问题 (`window.electronAPI.saveQR is not a function` 错误)
- 在`preload.js`中添加了`saveQR`函数的暴露
- 在`main.js`中实现了对应的`save-qr`事件处理程序

### 优化

- 完善了API文档，添加了二维码保存相关的接口说明
- 更新了用户手册，添加了新功能的使用说明
- 改进了错误处理和日志记录

## [1.0.0] - 2025-05-01

### 初始功能

- **PDF转换工具**
  - 支持PDF转Word、Excel、PPT、图片和OFD格式
  - 支持批量转换
  - 支持自定义转换选项

- **图片压缩工具**
  - 支持JPG、PNG、WebP格式
  - 可调节压缩质量
  - 批量处理功能

- **二维码生成**
  - 支持URL、文本、vCard格式
  - 自定义大小和颜色
  - 批量保存功能

### 技术细节

- 基于Electron v24.x和React v18.x构建
- 使用TypeScript提供类型安全
- 使用Ant Design v5.x构建用户界面
- 实现了完整的错误处理和日志系统

## [1.2.2] - 2023-05-15

### 修复
- 修复批量生成二维码后保存时文件名重复导致部分文件被覆盖的问题
- 优化文件名生成逻辑，确保每个二维码都能保存为单独的文件
- 增加自动检测重复文件名并重命名的机制

## [1.2.1] - 2023-05-14

### 修复
- 修复了批量生成二维码后保存失败的问题
- 修复了二维码批量保存时的参数传递问题

### 新增
- 单个二维码生成页面添加了清除内容按钮
- 二维码批量生成页面添加了清除所有按钮
- 改进了二维码生成和保存的用户体验 